@model MaharaFinalVersion.Models.LiveSessionModel

@{
    ViewData["Title"] = "جلسة مباشرة | مهارة";
}
<link rel="stylesheet" asp-href-include="~/css/live-session.css" />
<footer>
    &copy; 2026 مهارة - Live Session. جميع الحقوق محفوظة. 
    <a href="#">سياسة الخصوصية</a>
</footer>



<div class="live-session-page">
    <header>
        <h1>@Model.Title</h1>
        <h3>المعلم: @Model.Instructor</h3>
    </header>

    <main class="session-container">
        <!-- Screen Share Area -->
        <div id="screen-share" class="screen-share-area">
            <p>هنا ستظهر شاشة المعلم أو الطالب عند مشاركة الشاشة</p>
        </div>

        <!-- Participants List -->
        <aside class="participants-list">
            <h2>المشاركون</h2>
            <ul id="participants">
                @foreach (var p in Model.Participants ?? new List<MaharaFinalVersion.Models.Participant>())
                {
                    <li class="@(p.IsSpeaking ? "speaking" : "")">
                        @if (p.IsHost)
                        {
                            <span class="host-badge">المضيف</span>
                        }
                        @p.Name
                        @(p.IsSpeaking ? "- يتحدث" : "")
                    </li>
                }
            </ul>
        </aside>

        <!-- Chat Area -->
        <section class="chat-area">
            <h2>المحادثة</h2>
            <div id="messages">
                @foreach (var msg in Model.Messages ?? new List<MaharaFinalVersion.Models.ChatMessage>())
                {
                    <p>@msg.Time - @msg.Sender: @msg.Message</p>
                }
            </div>
            <input type="text" id="messageInput" placeholder="اكتب رسالة..." />
            <button id="sendBtn">إرسال</button>
        </section>
    </main>
</div>

<script src="https://cdn.agora.io/sdk/release/AgoraRTC_N.js"></script>
<script src="~/js/live-session.js"></script>
