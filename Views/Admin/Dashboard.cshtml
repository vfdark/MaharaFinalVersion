@model MaharaFinalVersion.Models.AdminDashboardViewModel

@{
    ViewData["Title"] = "ููุญุฉ ุชุญูู ุงููุดุฑู";
}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงููุดุฑู | ุฃูุงุฏูููุฉ ุทููู</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/admin-dashboard.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <span class="logo-icon">๐</span>
                </div>
                <div class="sidebar-brand">
                    <h2>ุฃูุงุฏูููุฉ ุทููู</h2>
                    <p>ููุญุฉ ุงููุดุฑู</p>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#stats" class="nav-item active" data-tab="stats">
                    <span class="nav-icon">๐</span>
                    <span>ุงูุฅุญุตุงุฆูุงุช</span>
                </a>
                <a href="#sessions" class="nav-item" data-tab="sessions">
                    <span class="nav-icon">๐</span>
                    <span>ุงูุฌูุณุงุช</span>
                </a>
                <a href="#students" class="nav-item" data-tab="students">
                    <span class="nav-icon">๐ฅ</span>
                    <span>ุงูุทูุงุจ</span>
                </a>
                <a href="#instructors" class="nav-item" data-tab="instructors">
                    <span class="nav-icon">๐จโ๐ซ</span>
                    <span>ุงููุฏุฑุจูู</span>
                </a>
                <a href="#settings" class="nav-item" data-tab="settings">
                    <span class="nav-icon">โ๏ธ</span>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <a href="/StudentDashboard" class="nav-item">
                    <span class="nav-icon">๐</span>
                    <span>ููุญุฉ ุงูุทุงูุจ</span>
                </a>
                <a href="/" class="nav-item">
                    <span class="nav-icon">๐ช</span>
                    <span>ุชุณุฌูู ุงูุฎุฑูุฌ</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-info">
                    <h1 class="page-title">ูุฑุญุจุงูุ ูุดุฑู</h1>
                    <p class="page-subtitle">ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ูุงูุทูุงุจ ูู ุฃูุงุฏูููุฉ ุทููู</p>
                </div>
                <div class="status-badge">
                    <span class="status-dot"></span>
                    <span>ูุดุฑู ูุดุท</span>
                </div>
            </header>

            <!-- Stats Tab Content -->
            <section id="stats" class="tab-content active">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-info">
                            <p class="stat-label">ุฅุฌูุงูู ุงูุฌูุณุงุช</p>
                            <p class="stat-value">@Model.TotalSessions</p>
                        </div>
                        <div class="stat-icon purple">๐</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <p class="stat-label">ุฅุฌูุงูู ุงูุทูุงุจ</p>
                            <p class="stat-value">@Model.TotalStudents</p>
                        </div>
                        <div class="stat-icon green">๐ฅ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <p class="stat-label">ุฅุฌูุงูู ุงูุชูุงุนูุงุช</p>
                            <p class="stat-value">@Model.TotalInteractions</p>
                        </div>
                        <div class="stat-icon amber">๐ฌ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <p class="stat-label">ุงููุฏุฑุจูู ุงูุฌุฏุฏ</p>
                            <p class="stat-value">@Model.PromotedInstructors</p>
                        </div>
                        <div class="stat-icon violet">โ</div>
                    </div>
                </div>

                <!-- Most Interacted Sessions -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-group">
                            <h3 class="card-title">
                                <span class="title-icon">๐</span>
                                ุฃูุซุฑ ุงูุฌูุณุงุช ุชูุงุนูุงู
                            </h3>
                            <p class="card-description">ุงูุฌูุณุงุช ุงูุชู ุญููุช ุฃุนูู ูุณุจุฉ ุชูุงุนู ูู ุงูุทูุงุจ</p>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="sessions-grid">
                            @for (int i = 0; i < Model.MostInteractedSessions.Count; i++)
                            {
                                var session = Model.MostInteractedSessions[i];
                                <div class="session-card @(i == 0 ? "gold" : "")">
                                    <div class="session-rank">
                                        <span class="rank-icon">@((i == 0) ? "๐" : "")</span>
                                        <span class="rank-number">#@(i+1)</span>
                                    </div>
                                    <h4 class="session-title">@session.Title</h4>
                                    <p class="session-instructor">@session.HostName</p>
                                    <div class="session-stats">
                                        <div class="interactions">
                                            <span class="icon">๐ฌ</span>
                                            <span class="count">@session.InteractionsCount</span>
                                            <span class="label">ุชูุงุนู</span>
                                        </div>
                                        <div class="students">
                                            <span class="icon">๐ฅ</span>
                                            <span class="count">@session.ParticipantsCount</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sessions Tab Content -->
            <section id="sessions" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-group">
                            <h3 class="card-title">ุฌููุน ุงูุฌูุณุงุช</h3>
                            <p class="card-description">ุนุฑุถ ูุฅุฏุงุฑุฉ ุฌููุน ุงูุฌูุณุงุช ุงูุชุนููููุฉ</p>
                        </div>
                        <button class="btn btn-primary">
                            <span>+</span> ุฅุถุงูุฉ ุฌูุณุฉ
                        </button>
                    </div>
                    <div class="card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุนููุงู ุงูุฌูุณุฉ</th>
                                    <th>ุงููุฏุฑุจ</th>
                                    <th>ุนุฏุฏ ุงูุทูุงุจ</th>
                                    <th>ุงูุชูุงุนูุงุช</th>
                                    <th>ุงูุชุงุฑูุฎ</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var session in Model.AllSessions)
                                {
                                    <tr>
                                        <td class="title-cell">@session.Title</td>
                                        <td>@session.HostName</td>
                                        <td>@session.ParticipantsCount</td>
                                        <td>@session.InteractionsCount</td>
                                        <td>@(session.ScheduledAt.HasValue ? session.ScheduledAt.Value.ToString("yyyy-MM-dd") : "-")</td>
                                        <td><span class="badge">@session.StatusArabic</span></td>
                                        <td>
                                            <button class="btn-icon">โ๏ธ</button>
                                            <button class="btn-icon danger">๐๏ธ</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Students Tab Content -->
            <section id="students" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-group">
                            <h3 class="card-title">
                                <span class="title-icon">๐</span>
                                ุฃูุถู ุงูุทูุงุจ
                            </h3>
                            <p class="card-description">ุงูุทูุงุจ ุงููุคูููู ููุชุฑููุฉ ููุฏุฑุจูู (ูุดุชุฑุท ุงูุชูุงู ููุงุฑุฉ ุชูููุฉ)</p>
                        </div>
                    </div>
                    <div class="card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุงูุชุฑุชูุจ</th>
                                    <th>ุงุณู ุงูุทุงูุจ</th>
                                    <th>ุงูููุงุท</th>
                                    <th>ููุน ุงูููุงุฑุงุช</th>
                                    <th>ุงูููุงุฑุงุช</th>
                                    <th>ุงูุฌูุณุงุช ุงูููุชููุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody>
    @for (int i = 0; i < Model.TopStudents.Count; i++)
    {
        var student = Model.TopStudents[i];
        <tr>
            <td><span class="rank-badge">@((i + 1))</span></td>
            <td class="name-cell">@student.FullName</td>
            <td class="points-cell">@student.TotalPoints</td>
            <td>
                <span class="skill-type @(student.SkillType)">
                    @(student.SkillTypeArabic)
                </span>
            </td>
            <td>
                <div class="skills-list">
                    @foreach (var skill in student.Skills)
                    {
                        <span class="skill-tag">@skill</span>
                    }
                </div>
            </td>
            <td>@student.CompletedSessions</td>
            <td>
                @if (student.IsEligibleForPromotion)
                {
                    <a asp-controller="Admin" asp-action="ConfirmPromote" asp-route-id="@student.UserId" class="btn btn-warning btn-sm">
                        ุชุฑููุฉ ููุฏุฑุจ
                    </a>
                }
                else
                {
                    <span class="text-muted">ุบูุฑ ูุคูู</span>
                }
            </td>
        </tr>
    }
</tbody>

                        </table>
                    </div>
                </div>
            </section>

            <!-- Instructors Tab Content -->
            <section id="instructors" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ุงููุฏุฑุจูู</h3>
                        <p class="card-description">ุนุฑุถ ุฌููุน ุงููุฏุฑุจูู ูู ุงูุฃูุงุฏูููุฉ</p>
                    </div>
                    <div class="card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุงูุงุณู</th>
                                    <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                                    <th>ุงูุชุฎุตุต</th>
                                    <th>ุนุฏุฏ ุงูุฌูุณุงุช</th>
                                    <th>ุงูุชูููู</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var instructor in Model.Instructors)
                                {
                                    <tr>
                                        <td>@instructor.FullName</td>
                                        <td>@instructor.Email</td>
                                        <td>@instructor.Specialty</td>
                                        <td>@instructor.SessionsCount</td>
                                        <td>@instructor.Rating</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Settings Tab Content -->
            <section id="settings" class="tab-content">
                <!-- Your original settings tab content here (unchanged) -->
            </section>
        </main>
    </div>

    <script>
        // Tab switching functionality
        document.querySelectorAll('.nav-item[data-tab]').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const tab = this.dataset.tab;
                
                // Update nav items
                document.querySelectorAll('.nav-item[data-tab]').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(tab).classList.add('active');
                
                // Update header title
                const titles = {
                    stats: { title: 'ูุฑุญุจุงูุ ูุดุฑู', subtitle: 'ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ูุงูุทูุงุจ ูู ุฃูุงุฏูููุฉ ุทููู' },
                    sessions: { title: 'ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช', subtitle: 'ุนุฑุถ ูุฅุฏุงุฑุฉ ุฌููุน ุงูุฌูุณุงุช ุงูุชุนููููุฉ' },
                    students: { title: 'ุฅุฏุงุฑุฉ ุงูุทูุงุจ', subtitle: 'ุนุฑุถ ูุฅุฏุงุฑุฉ ุฌููุน ุงูุทูุงุจ ุงููุณุฌููู' },
                    instructors: { title: 'ุฅุฏุงุฑุฉ ุงููุฏุฑุจูู', subtitle: 'ุนุฑุถ ูุฅุฏุงุฑุฉ ุงููุฏุฑุจูู ูู ุงูุฃูุงุฏูููุฉ' },
                    settings: { title: 'ุงูุฅุนุฏุงุฏุงุช', subtitle: 'ุฅุนุฏุงุฏุงุช ุงููุธุงู ูุงูุชูุถููุงุช' }
                };
                
                document.querySelector('.page-title').textContent = titles[tab].title;
                document.querySelector('.page-subtitle').textContent = titles[tab].subtitle;
            });
        });
    </script>
</body>
</html>
